<!-- 博文的布局-Layout -->
<!DOCTYPE html>
<html>
<head>
<!-- 引入head标签 -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-sclable=0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
" />
<meta name="keywords" content="" />
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet" href="/assets/css/media.css">
<link rel="stylesheet" href="/assets/css/animate.min.css">
<link rel="stylesheet" href="/assets/css/pygments/pygments_.css">
<link rel="stylesheet" href="/assets/css/github-markdown.css">
<!-- SNS-icon -->
<script src="/assets/fonts/sns/iconfont.js"></script>
<!-- share.css -->
<link rel="stylesheet" href="/assets/css/share.min.css">
<!-- font -->
<link rel="stylesheet" href="/assets/css/font.css">
<link href="https://fonts.googleapis.com/css?family=Kaushan+Script|Pacifico|Ubuntu|Roboto+Mono|Source+Sans+Pro" rel="stylesheet">

<!-- Favicon -->
<link href="/assets/profile.jpeg" rel="shortcut icon" />
<link href="/assets/profile.jpeg" rel="apple-touch-icon-precomposed" />
<!-- Android Lolipop Theme Color -->
<!-- <meta name="theme-color" content="#1464FB"> -->
<title>Linux下定制RPM软件包</title>
<!-- 百度统计 -->

<!-- 谷歌分析 -->


<!-- Android Lolipop Theme Color -->
<meta name="theme-color" content=" #9A85FF ">
</head>
<body>

<!-- 顶部锚点 -->
<a id="htmlup" name="htmlup"></a>
<!-- 引入博文顶部选项 -->

<header id="post-header" style="background-color:#9A85FF;">
  <div class="top-center">
      <div class="logo">
          <a href="/" title="my awesome webtitle" style="color: white;"></a>
      </div>
      <nav class="top-nav">
          <ul>
              
          </ul>
      </nav>
      <div id="top-boot">
        <a href="javascript:;" id="boot1" style="display:block;" onclick="document.getElementById('boot-area').style.display='block';document.getElementById('boot1').style.display='none';document.getElementById('boot2').style.display='block';"><img src="/assets/boot_white.png" alt=""></a>
        <a href="javascript:;" id="boot2" style="display: none;" onclick="document.getElementById('boot-area').style.display='none';document.getElementById('boot1').style.display='block';document.getElementById('boot2').style.display='none';"><img src="/assets/boot_white.png" alt=""></a>
      </div>
  </div>

</header>


<!-- 引入移动下拉选项 -->
<div id="boot-area">
    <ul>
        
    </ul>
</div>

<!-- 引入博文顶部样式 -->
<!-- 版本一 垃圾 -->
<!-- <div class="wow fadeIn top" data-wow-duration="3.5s" >
    <span class="wow fadeInUp" data-wow-delay="0.2s">Linux下定制RPM软件包</span>
    <span class="wow fadeInUp" data-wow-delay="0.4s"></span>
    <span class="wow fadeInUp" data-wow-delay="0.4s"></span>
    <span class="wow fadeInUp" data-wow-delay="0.6s">作者&nbsp;&nbsp;|&nbsp;&nbsp;JingChao</span>
</div> -->

<!-- 版本二 可切换页面 -->

<div class="post-top" style="background-color:#9A85FF;">
  <!-- 页面宽度大于800px -->
  <div class="left-area">
    
      <a href="/Glusterfs%E9%9B%86%E7%BE%A4%E7%9A%84%E4%B8%80%E6%AC%A1%E7%94%9F%E4%BA%A7%E9%85%8D%E7%BD%AE%E5%AE%9E%E8%B7%B5/" class="btn bounceInLeft animated" onmouseover="showLeft();this.style.color='#9A85FF';" onmouseout="goneLeft();this.style.color='rgba(0,0,0,.2)';"><</a>
      <div id="left-tab" style="display:none;"><span class="left-san"></span><span class="left-main" style="color:#9A85FF;"><sapn class="main">GlusterFS集群的一次生产配置实践</sapn></span></div>
    
  </div>
  <div class="post-titlearea">
    <span class="wow fadeInUp" data-wow-delay="0.2s">Linux下定制RPM软件包</span>
    <!-- <span class="wow fadeInUp" data-wow-delay="0.4s"></span> -->
    <!-- <span class="wow fadeInUp" data-wow-delay="0.4s"></span> -->
    <!-- <span class="wow fadeInUp" data-wow-delay="0.6s">作者&nbsp;&nbsp;|&nbsp;&nbsp;JingChao</span> -->
  </div>
  <div class="right-area">
    
      <a href="/hello-jekyll/" class="btn bounceInRight self-animated" onmouseover="showRight();this.style.color='#9A85FF';" onmouseout="goneRight();this.style.color='rgba(0,0,0,.2)';">></a>
      <div id="right-tab" style="display:none;"><span class="right-san"></span><span class="right-main" style="color:#9A85FF;"><sapn class="main">Hello Jekyll</sapn></span></div>
    
  </div>

  <!-- 页面宽度小于800px -->
  <div class="post-changearea">
    
      <a href="/Glusterfs%E9%9B%86%E7%BE%A4%E7%9A%84%E4%B8%80%E6%AC%A1%E7%94%9F%E4%BA%A7%E9%85%8D%E7%BD%AE%E5%AE%9E%E8%B7%B5/" class="leftchange" style="border-right: 1px solid #9A85FF;border-bottom: 2px solid #9A85FF;"><span>上一篇<br><br>GlusterFS集群的一次生产配置实践</span></a>
    
    
      <a href="/hello-jekyll/" class="rightchange" style="border-left: 1px solid #9A85FF;border-bottom: 2px solid #9A85FF;"><span>下一篇<br><br>Hello Jekyll</span></a>
    
  </div>
</div>


<div class="markdown-body fadeInUp animated">

  

  <!-- 文章内容 -->
  <h3 id="什么是rpm">什么是RPM</h3>

<p>RPM是<strong>RPM Package Manager</strong>的缩写，以前的缩写为Red-Hat Package Manager（RPM软件包管理器），这一文件格式名称虽然打上了RedHat的标志（其诞生时用于Red Hat Linux），但其开放的设计理念使其不仅被Linux诸多发行版所采用，还被其它操作系统平台引入，例如Novell Netware，AIX等<!-- more --> 。</p>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-000.jpg" alt="000" /></p>
<h3 id="为什么要定制">为什么要定制</h3>

<p>定制RPM包一般来源于工程中的需要，例如某些软件只提供源码版本，每次部署都要copy一份以前编译好的版本到新的开发测试环境中去，这个过程费劲不说（尤其在网段之间是隔离的环境中），随着时间的推移，以前版本中做过的个性化配置与修改往往也被引入到了新的环境，不利于后续的开发测试工作，所以利用RPM把标准的软件包管理起来作为基线是自然而然的选择。</p>

<p>最近项目中使用了nginx，写此文时，Red Hat官方源中的版本到1.8.1，但在该红帽版本中却没有包含对”会话黏连”这样第三方模块的编译支持在内，项目开发中却又要使用该功能，所以基于社区版本制作RPM，将我们需要的第三方模块编译进去。</p>

<h3 id="步骤纪要">步骤纪要</h3>

<p>这里写成纪要，有种奇怪的感觉，严重不符合工程思维，但第一时间没有记录步骤，所以用截图的方式作为纪要说明。</p>

<h4 id="1-准备rpm打包工具">1. 准备rpm打包工具</h4>

<p>使用yum安装rpmbuild工具，前提是确保有一个可用的yum源</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">#</span> <span class="n">yum</span> <span class="n">install</span> <span class="n">rpm</span><span class="o">*</span> <span class="n">rpm</span><span class="o">-</span><span class="n">build</span> <span class="n">rpmdev</span><span class="o">*</span>
</code></pre></div></div>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-001.jpg" alt="001" /></p>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-002.jpg" alt="002" /></p>

<h4 id="2-生产打包目录">2. 生产打包目录</h4>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">#</span> <span class="n">rpmdev</span><span class="o">-</span><span class="n">setuptree</span>
</code></pre></div></div>

<p>root用户默认在根目录中生成（当然，如果你的环境比较重要，可以使用普通用户进行操作以减少风险，目录也可以配置文件macrofiles中设置）</p>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-003.jpg" alt="003" /></p>

<p>查看目录结构</p>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-004.jpg" alt="004" /></p>

<p>目录的简要描述如下</p>

<table>
  <thead>
    <tr>
      <th>目录</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>BUILD</td>
      <td>源代码解压后的存放目录</td>
    </tr>
    <tr>
      <td>RPMS</td>
      <td>制作完成后的RPM包存放目录，里面有与平台相关的子目录</td>
    </tr>
    <tr>
      <td>SOURCES</td>
      <td>收集的源材料，补丁的存放位置</td>
    </tr>
    <tr>
      <td>SPECS</td>
      <td>SPEC文件存放目录</td>
    </tr>
    <tr>
      <td>SRMPS</td>
      <td>存放SRMPS生成的目录</td>
    </tr>
    <tr>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="3-准备打包源码及相关文件">3. 准备打包源码及相关文件</h4>

<p>上传nginx源码包（源码包来源 <code class="highlighter-rouge">wget http://nginx.org/down/nginx-1.8.1.tar.gz</code>）至SOURCES路径下</p>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-005.jpg" alt="005" /></p>

<h5 id="生成spec文件">生成SPEC文件</h5>

<p><a href="https://en.wikipedia.org/wiki/Rpm_(software)#SPEC_file">wikipedia</a>中用了一个非常形象的描述，将SPEC文件称作是制作RPM包的”食谱“，它是以<code class="highlighter-rouge">.spec</code>为后缀的文件，其中包含了包名、版本、RPM版本号、和build、install、clean的步骤以及修改日志等，并且可以支持从一个spec文件构建多个RPM包。</p>

<p>所以我们可以基于spec文件来灵活地定制我们需要的各类特性，这里先简述一个常规spec文件的大致内容，后面接着给出一个捷径，如何基于已有的RPM文件进行提取并修改spec，并给出spec文件结构中各部分含义。</p>

<h6 id="制作常规spec文件">制作常规spec文件</h6>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># rpmdev-newspec -o nginx-1.8.1.spec</span>
</code></pre></div></div>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-006.jpg" alt="006" /></p>

<p>修改spec</p>

<p>Name:           nginx</p>

<p>Version:        1.8.1</p>

<p>Release:        1%{?dist}</p>

<p>Summary:        This version of Nginx is build for POP</p>

<p>License:        GPL</p>

<p>URL:            http://nginx.org/download/nginx-1.8.1.tar.gz</p>

<p>Packager:        <a href="mailto:jcchen@chinaclear.com.cn">jcchen@chinaclear.com.cn</a></p>

<p>Source0:        %{name}-%{version}.tar.gz</p>

<p>Source1:        nginx.conf[<a href="#_msocom_1">u1]</a></p>

<p>BuildRoot:      %{_topdir}/BUILDROOT</p>

<p>BuildRequires:  gcc &gt;= 4.8.3,gcc-c++,perl-ExtUtils-Embed,perl,perl-devel</p>

<hr />

<p>[<a href="#_msoanchor_1">u1]</a>此处为自定义的配置文件，如果需要增加其他配置文件，可继续添加Source2、Source3… 文件路径为编译路径下的SOURCES目录下</p>

<p>%description</p>

<p>Add sticky module in this RPM</p>

<p>%prep</p>

<p>%setup -q</p>

<p>%build</p>

<p>./configure  –prefix=/opt/%{name}-%{version}/ –pid-path=/opt/%{name}-%{version}/nginx.pid –lock-path=/opt/%{name}-%{version}/nginx.lock –user=pop –group=pop –error-log-path=/opt/%{name}-%{version}/logs/error.log –http-log-path=/opt/%{name}-%{version}/logs/access.log –with-http_ssl_module –with-http_stub_status_module –with-http_gzip_static_module –with-http_gunzip_module –with-file-aio –with-http_realip_module –with-http_perl_module –with-http_ssl_module –with-http_spdy_module –without-poll_module –without-select_module –without-http_ssi_module –without-http_userid_module –without-http_memcached_module –without-mail_pop3_module –without-mail_imap_module –without-mail_smtp_module –without-http_uwsgi_module –without-http_scgi_module –http-client-body-temp-path=/opt/%{name}-%{version}/client_body_temp –http-proxy-temp-path=/opt/%{name}-%{version}/proxy_temp –http-fastcgi-temp-path=/opt/%{name}-%{version}/fastcgi_temp</p>

<p>–with-pcre=$RPM_SOURCE_DIR/pcre-8.38[<a href="#_msocom_2">u2]</a></p>

<p>–with-openssl=$RPM_SOURCE_DIR/openssl-1.0.2f</p>

<p>–with-zlib=$RPM_SOURCE_DIR/zlib-1.2.8</p>

<p>–with-pcre-jit –add-module=$RPM_SOURCE_DIR/nginx-sticky-module-ng [<a href="#_msocom_3">u3]</a> –with-ld-opt=-Wl,-E</p>

<p>make %{?_smp_mflags}</p>

<p>%install</p>

<p>rm -rf $RPM_BUILD_ROOT</p>

<p>make install DESTDIR=$RPM_BUILD_ROOT</p>

<p>#install configure file</p>

<p>install -p -D -m 0644 %{SOURCE1}      %{buildroot}/opt/%{name}-%{version}/conf/nginx.conf[<a href="#_msocom_4">u4]</a></p>

<p>%clean</p>

<p>rm -rf $RPM_BUILD_ROOT</p>

<p>%files</p>

<p>%defattr(-,root,root,-)</p>

<p>/opt/%{name}-%{version}/</p>

<p>%config(noreplace) /opt/%{name}-%{version}/conf/nginx.conf</p>

<p>/usr/lib64/perl5/perllocal.pod</p>

<p>/usr/local/lib64/perl5/auto/nginx/.packlist</p>

<p>/usr/local/lib64/perl5/auto/nginx/nginx.bs</p>

<p>/usr/local/lib64/perl5/auto/nginx/nginx.so</p>

<p>/usr/local/lib64/perl5/nginx.pm</p>

<p>/usr/local/share/man/man3/nginx.3pm</p>

<p>[<a href="#_msocom_5">u5]</a></p>

<p>%changelog</p>

<ul>
  <li>Fri Mar 19 2017 Chenjingchao <a href="mailto:jcchen@chinaclear.com.cn">jcchen@chinaclear.com.cn</a> 1.8.1-1.el7</li>
</ul>

<p>configure parameter which used in this version is copied from system-environment</p>

<hr />

<p>[<a href="#_msoanchor_2">u2]</a>Pcre库提前下载好，并解压至编译路径下的SOURCES文件夹</p>

<p>[<a href="#_msoanchor_3">u3]</a>同上</p>

<p>[<a href="#_msoanchor_4">u4]</a>将之前添加的自定义配置文件安装，并设置权限</p>

<p>[<a href="#_msoanchor_5">u5]</a>第一次编译打包后失败，提示该类文件被安装但未被打包，将此部分添加至此处，重新rpmbuild通过</p>

<blockquote>
  <p>上述spec文件中%configure中制定了相关库的路径</p>

  <p>–with-pcre=</p>

  <p>–with-openssl=</p>

  <p>–with-zlib=</p>

  <p>–add-module=</p>

  <p>编译前需要将以上文件解压缩至相应路径，在上述配置中，应该解压至~/rpmbuild/SOURCES/.</p>
</blockquote>

<h4 id="4-build-rpm">4. build RPM</h4>

<p>执行编译命令</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># rpmbuild -bb nginx.1.8.1.spec</span>
</code></pre></div></div>

<p><img src="/assets/img/rpm-nginx/rpm-nginx-007.jpg" alt="007" /></p>

<p>编译过程将会首先检查spec文件中BuildRequires字段中包含的软件包，如果未安装相关编译工具，会提示缺少软件包，安装后重新执行rpmbuild -bb nginx.1.8.1.spec。完成编译。</p>

<h3 id="a-simple-way">A SIMPLE WAY</h3>

<p>从以上中可以看到从无到有编写一个健壮的spec文件需要考虑很多细节，从工程的角度而言，如果你的定制需求相比于上述过程是很小的一部分，那么可以基于现有的RPM包提取spec文件并基于此进行修改，已达到快速实现你的定制需求的目的。</p>

<h4 id="1-下载srpm">1. 下载SRPM</h4>

<p>上传src.rpm包至rpmbuild目录下的SOURCES路径下，src包来源官方网站：http://nginx.org/packages/rhel/7/SRPMS/</p>

<p><img src="/assets/img/rpm-nginx/image001.jpg" alt="" /></p>

<h4 id="2-提取srcrpm中文件">2. 提取src.rpm中文件</h4>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">#</span> <span class="n">rpm2cpio</span> <span class="n">nginx</span><span class="o">-</span><span class="mf">1.8</span><span class="o">.</span><span class="mi">1</span><span class="o">-</span><span class="mf">1.</span><span class="n">el7</span><span class="o">.</span><span class="n">ngx</span><span class="o">.</span><span class="n">src</span><span class="o">.</span><span class="n">rpm</span> <span class="o">|</span> <span class="n">cpio</span> <span class="o">-</span><span class="n">idv</span>
</code></pre></div></div>

<p>使用rpm2cpio命令提取src.rpm中文件至当前目录，可以看到提取出的文件分为三类：（1）源码包：nginx-1.8.1.tar.gz ，该包与官方下载网址nginx.org/packages/rhel/7/x86_64/RPMS中对应版本的包相同；（2）SPEC文件：nginx.spec，该文件为rpm打包的脚本文件，其中规定了打包的各项流程和操作；（3）其它配置文件：make_install阶段时安装这些配置文件</p>

<p><img src="/assets/img/rpm-nginx/image002.jpg" alt="" /></p>

<h4 id="3准备要加入编译的第三方模块">3.准备要加入编译的第三方模块</h4>

<p>上传“会话粘连”模块的tar包至SOURCES目录下，并解压</p>

<p><img src="/assets/img/rpm-nginx/image003.jpg" alt="" /></p>

<p>解压</p>

<p><img src="/assets/img/rpm-nginx/image004.jpg" alt="" /></p>

<h4 id="4-修改spec文件">4. 修改SPEC文件</h4>

<p>将nginx.spec移动至rpmbuild目录的SPECS路径下，后续将修改此SPEC文件，并基于修改后的SPEC文件重新打包rpm</p>

<p><img src="/assets/img/rpm-nginx/image005.jpg" alt="" /></p>

<p>修改SPEC文件，加入第三方模块进行编译，具体的修改处以及SPEC文件内容简述详见文末</p>

<h4 id="5rpmbuild">5.rpmbuild</h4>

<p>使用修改过的spec文件打包rpm</p>

<p><img src="/assets/img/rpm-nginx/image006.jpg" alt="" /></p>

<p>打包完成</p>

<p><img src="/assets/img/rpm-nginx/image007.jpg" alt="" /></p>

<p>在RPMS路径下，查看打包结果，三个文件分别为rpm包、debug包、debuginfo包</p>

<p><img src="/assets/img/rpm-nginx/image008.jpg" alt="" /></p>

<h4 id="6-rpm安装测试启动验证">6. rpm安装测试、启动验证</h4>

<p>rpm包拷贝至其它机器，测试安装</p>

<p><img src="/assets/img/rpm-nginx/image009.jpg" alt="" /></p>

<p>测试启动</p>

<p><img src="/assets/img/rpm-nginx/image010.jpg" alt="" /></p>

<p>进程验证</p>

<p><img src="/assets/img/rpm-nginx/image011.jpg" alt="" /></p>

<p>至此，就已经完成了rpm包的定制打包。</p>

<h3 id="how-spec-works-">How SPEC works ?</h3>

<blockquote>
  <p>以本文为例，简述一下spec文件的各阶段含义</p>
</blockquote>

<p>文件开始宏定义了nginx_home路径、用户、组等</p>

<p><img src="/assets/img/rpm-nginx/image012.jpg" alt="" /></p>

<p>对于不同的系统版本，定义安装依赖与编译依赖，这里openssl库以依赖的方式引入，不需要在configure里单独加入库路径，编译时会先检查编译依赖BuildRequires中的包与版本，如果缺失或版本不符会中断并提示缺失的依赖，使用yum安装对应包即可</p>

<p><img src="/assets/img/rpm-nginx/image013.jpg" alt="" /></p>

<p>RPM描述：简介、名称、版本、发行版本、厂商、URL地址等</p>

<p>源文件定义：在该处使用Source字段定义源文件，也就是在第2小节中，在src.rpm中提取出的若干文件</p>

<p>添加编译依赖：zlib-devel、pcre-devel库也以编译依赖的方式定义，无需再configure中添加库路径；这里增加了gcc等编译依赖</p>

<p><img src="/assets/img/rpm-nginx/image014.jpg" alt="" /></p>

<p>编译分为各个阶段</p>

<p><strong>%preq阶段</strong>为编译前的准备操作，%setup为定义的宏，用于对源码包进行解压</p>

<p><img src="/assets/img/rpm-nginx/image015.jpg" alt="" /></p>

<p><strong>%build</strong>阶段为编译选项配置和make过程，官方spec文件中进行了两遍配置与make操作，第一遍为debug包的编译如上图所示，第二遍为常规安装包的编译如下图所示。这里在两个configure配置中均做了修改：（1）添加会话粘连模块。路径为在第3小节中模块解压的路径（2）添加pcre-jit，因项目中原系统环境的nginx上使用了该编译参数，增加pcre正则库的jit编译支持</p>

<p><img src="/assets/img/rpm-nginx/image016.jpg" alt="" /></p>

<p><strong>%install</strong>阶段 安装各类文件，包括使用Source定义的各类源文件也在此过程install</p>

<p><img src="/assets/img/rpm-nginx/image017.jpg" alt="" /></p>

<p><img src="/assets/img/rpm-nginx/image018.jpg" alt="" /></p>

<p><strong>%clean</strong>阶段 清理build文件</p>

<p><img src="/assets/img/rpm-nginx/image019.jpg" alt="" /></p>

<p><strong>%files</strong>阶段 打包各类文件，可以使用%config指定哪些文件为配置文件，%attr指定文件属性</p>

<p><img src="/assets/img/rpm-nginx/image020.jpg" alt="" /></p>

<p><strong>%pre</strong>定义安装前的操作，如添加用户</p>

<p><img src="/assets/img/rpm-nginx/image021.jpg" alt="" /></p>

<p><strong>%post</strong>为安装后的操作，注册服务、打印欢迎信息、创建error.log、access.log等文件</p>

<p><img src="/assets/img/rpm-nginx/image022.jpg" alt="" /></p>

<p><strong>%preun</strong> <strong>和 %postun</strong> <strong>阶段</strong></p>

<p>分别定义了卸载前和卸载后的操作 例如注销服务</p>

<p><img src="/assets/img/rpm-nginx/image023.jpg" alt="" /></p>

<p><strong>%changelog</strong></p>

<p>记录修改信息，这里注释掉了以前的change信息，否则编译时会出现“bogus date”的错误</p>

<p><img src="/assets/img/rpm-nginx/image024.jpg" alt="" /></p>

<p>经该方法制作的rpm文件已在生产系统使用，并运行正常。</p>


  <!-- 引入share模块 -->
  

<!-- share.js -->
<script src="/assets/js/social-share.min.js"></script>
<script>
  socialShare('.social-share', {
    sites: [
      
    ],
    wechatQrcodeTitle: "分享到微信朋友圈",
    wechatQrcodeHelper: '期待在朋友圈见到这篇文章'
  });
</script>

</div>

<!-- 底部锚点 -->
<a id="htmldown" name="htmldown"></a>
<!-- 引入评论模块 -->






<!-- 引入goto模块 -->
<div class="bounceInRight animated go">
  <a title="顶部切换页面" class="gototop" href="#htmlup" target="_self">
    <div class="box" style="font-family:'ffad_matroregular';">
        Top
    </div>
  </a>
  <a title="底部有评论哦" class="gotobottom" href="#htmldown" target="_self">
    <div class="box" style="font-family:'ffad_matroregular';">
        Foot
    </div>
  </a>
</div>

<!-- 引入页面底部模块 -->
<footer id="bottom">
  <br>
  <span>Jingchao's Party ©
  
  
    
    -
  
  2018
  <br>
  Powered by <a href="https://www.jekyll.com.cn/">Jekyll</a></span>
</footer>


<!-- 引用wow.js的动画效果 -->
<script src="/assets/js/wow.js"></script>
<script>
    var wow = new WOW({
        boxClass: 'wow',
        animateClass: 'animated',
        // offset: 600,
        mobile: true,
        live: true
    });
    wow.init();
</script>
<!-- 页面刷新回到顶部 -->
<script>
    window.onbeforeunload = function(){
        //刷新后页面自动回到顶部
        document.documentElement.scrollTop = 0;  //ie下
        document.body.scrollTop = 0;  //非ie
    }
</script>
<script src="/assets/js/main.js"></script>
</body>
</html>
